<div class="home-content">
  <!-- Información de la encuesta -->
  <div *ngIf="surveyDetails" class="card survey-card">
    <h2>{{ surveyDetails.titulo }}</h2>
    <p>{{ surveyDetails.descripcion }}</p>
  </div>

  <!-- Secciones de la encuesta -->
  <div *ngIf="secciones && secciones.length > 0" class="card section-card">
    <h3>Secciones</h3>
    <ul>
      <li *ngFor="let seccion of secciones" (click)="loadQuestionsForSection(seccion.id)">
        <h4>{{ seccion.titulo }}</h4>
        <p>{{ seccion.descripcion }}</p>
      </li>
    </ul>
  </div>

  <!-- Preguntas de la sección seleccionada -->
  <div *ngIf="preguntas && preguntas.length > 0" class="card question-card">
    <h3>Preguntas de la sección: {{ selectedSection?.titulo }}</h3>
    <form (ngSubmit)="submitAnswers()">
      <ul>
        <li *ngFor="let pregunta of preguntas">
          <h4>{{ pregunta.texto }}</h4>

          <!-- Pregunta de opción múltiple -->
          <div *ngIf="pregunta.tipo === 'Opcion multiple'">
            <h5>Opciones:</h5>
            <ul>
              <li *ngFor="let opcion of getOptionsForQuestion(pregunta.id)">
                <input
                  type="radio"
                  [name]="pregunta.id"
                  [value]="opcion.id"
                  [(ngModel)]="pregunta.respuesta"
                  required
                />
                {{ opcion.texto }}
              </li>
            </ul>
          </div>

          


          <!-- Pregunta de tipo número -->
          <div *ngIf="pregunta.tipo === 'Número'">
            <label for="respuesta{{ pregunta.id }}">Respuesta (número):</label>
            <input
              id="respuesta{{ pregunta.id }}"
              type="number"
              [(ngModel)]="pregunta.respuesta"
              name="respuesta{{ pregunta.id }}"
              required
            />
          </div>

          <!-- <!-- Pregunta de texto -->
<div *ngIf="pregunta.tipo === 'Texto'">
  <label for="respuesta{{ pregunta.id }}">Tu respuesta:</label>
  <input
    id="respuesta{{ pregunta.id }}"
    type="text"
    [(ngModel)]="pregunta.respuesta"
    name="respuesta{{ pregunta.id }}"
    placeholder="Escribe tu respuesta aquí..."
    required
  />
</div>

<div *ngIf="pregunta.tipo === 'Abierta' || pregunta.comentario">
  <label for="comentario{{ pregunta.id }}">:</label>
  <input
    id="comentario{{ pregunta.id }}"
    type="text"
    [(ngModel)]="pregunta.comentario"
    name="comentario{{ pregunta.id }}"
    placeholder="Escribe tu comentario aquí..."
    class="form-control"
  />
</div>

<div *ngIf="pregunta.tipo !== 'Opcion multiple' && pregunta.tipo !== 'Texto' && pregunta.tipo !== 'Número'">
  <label for="comentario{{ pregunta.id }}">Comentario (opcional):</label>
  <input type="text" id="comentario{{ pregunta.id }}" [(ngModel)]="comentarios[pregunta.id]" placeholder="Escribe tu comentario aquí...">
</div>

        </li>
      </ul>
      <button type="submit" [disabled]="!isFormValid()">Enviar Respuestas</button>
    </form>
  </div>

  <!-- Mensajes en caso de no haber preguntas o secciones -->
  <div *ngIf="(!preguntas || preguntas.length === 0) && selectedSection">
    <p>No hay preguntas disponibles para esta sección.</p>
  </div>
  <div *ngIf="!secciones || secciones.length === 0">
    <p>No hay secciones disponibles para esta encuesta.</p>
  </div>
</div>
